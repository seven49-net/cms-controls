var navigation={extractLanguage:function(e){e=void 0===e||null===e?"de":e;var n=location.pathname,a;return a="/"===n?e:n.substr(1,2)},removeFirstPageEqualToCategory:function(e){$(e).children("li").each(function(){if($(this).children("ul").length){var e=$(this).children("a").text(),n=$(this).children("ul").children("li:first-child").children("a").text();e===n&&$(this).children("ul").children("li:first-child").remove()}})},getUrlID:function(){var e=location.pathname;return e.split("/").pop().split(".").shift()},current:function(e){var n=$.extend({urlID:navigation.getUrlID(),currentClass:"selected",selector1:".MainNavigation",selector2:".MainNavigation"},e),a=$(n.selector1+" ul li.item_"+n.urlID);if($(n.selector1).find(".selected").removeClass("selected"),0===a.length){var l=new RegExp("http://[^/?]+/[^/?]+/([^/?]+)");if(l.test(location.href)){var t=l.exec(location.href)[1];$(n.selector1+" ul li.item_"+t).addClass(n.currentClass)}}a.length>0&&(a.parentsUntil(n.selector2).addClass(n.currentClass),a.addClass(n.currentClass),a.children().addClass(n.currentClass))},mainNavigation:function(e){var n=$.extend({urlID:navigation.getUrlID(),container:".MainNavigation",container2:".root",defaultLanguage:"de",removeMainFirstEqualItem:!0,rootClass:"root",onlyOneSubLevel:!1,legacyHover:!1,megaPanel:!1,megaPanelClass:"MegaPanel",currentClass:"selected",subNavigation:!1,subContainer:".TreeNavigation",subClass:"sub-level",subShowRootParentLink:!0,emptyMainContentNav:!1,emptyContainerClass:"ContentSubNav",emptySelector:".ObjectsCountNull",mobileMenu:!1,mobileContainer:"#mobileMenu",mobileHideSubLevel:!0,mobileCurrentClass:"selected",mobileCustomElements:!1,mobilLanguageSelection:!1,mobileLanguagePrepend:!0,crumbs:!1,crumbsContainer:".breadcrumbs",languageNavigation:!1,languageContainer:".LanguageSelection",languageNoWrap:!1},e),a=this.extractLanguage(n.defaultLanguage);$.ajax({url:"/sitemap/"+a+".htm",success:function(e){var a=$(e);$(a).find(".selected").removeClass("selected"),n.removeMainFirstEqualItem&&$(a).children("li").each(function(){if($(this).children("ul").length){var e=$(this).children("a").text(),n=$(this).children("ul").children("li:first-child").children("a").text();e===n&&$(this).children("ul").children("li:first-child").remove()}}),n.megaPanel&&$(a).children("li").each(function(){$(this).children("ul").length&&$(this).children("ul").wrap('<div class="'+n.megaPanelClass+'"></div>')}),$(n.container).append("<ul class='"+n.rootClass+"'>"+$(a).html()+"</ul>"),navigation.current({urlID:n.urlID,selector1:n.container,selector2:n.container2,currentClass:n.currentClass}),n.onlyOneSubLevel&&$(n.container).find("ul ul ul").remove(),n.legacyHover&&navigation.legacyHover(n.container),n.subNavigation&&navigation.subNavigation(e,{urlID:n.urlID,container:n.subContainer,subClass:n.subClass,showRootParentLink:n.subShowRootParentLink}),n.emptyMainContentNav&&navigation.emptyMainContentNavigation(e,{urlID:n.urlID,containerClass:n.emptyContainerClass,selector:n.emptySelector}),n.mobileMenu&&navigation.mobileMenu(e,{urlID:n.urlID,container:n.mobileContainer,currentClass:n.mobileCurrentClass,customElements:n.mobileCustomElements,hideSubLevel:n.mobileHideSubLevel,languageSelection:n.mobileLanguageSelection,languagePrepend:n.mobileLanguagePrepend}),n.crumbs&&navigation.breadcrumbs(e,{container:n.crumbsContainer}),n.languageNavigation&&navigation.languageNavigation(e,{urlID:n.urlID,container:n.languageContainer,noWrap:n.languageNoWrap})}})},subNavigation:function(e,n){var a=$.extend({urlID:navigation.getUrlID(),container:".TreeNavigation",currentClass:"selected",noSubNavClass:"no-sub-nav",emptyClass:"empty-sub-nav",rootClass:"sub-level",showRootParentLink:!0},n),l=a.urlID,t=$(e);t.find(".selected").removeClass("selected"),navigation.removeFirstPageEqualToCategory(t);var i=null;if($(t).find("li.item_"+l).not(".category").length?i=$(t).find("li.item_"+l).not(".category"):$(t).find("li.multichild.firstpage_"+l).length&&(i=$(t).find("li.multichild.firstpage_"+l)),null!==i){i.addClass(a.currentClass).parents().addClass(a.currentClass);var r=$(t).find("li.category."+a.currentClass)[0].outerHTML;$(a.container).append('<ul class="'+a.rootClass+'">'+r+"</ul>"),a.showRootParentLink||$(a.container).find("li.category."+a.currentClass+"> a").remove(),$(a.container).find("li."+a.currentClass).children("a").addClass(a.currentClass)}else $(a.container).addClass(a.emptyClass),$("body").addClass(a.noSubNavClass)},mobileMenu:function(e,n){var a=$.extend({urlID:navigation.getUrlID(),container:"#mobileMenu",currentClass:"selected",customElements:!1,hideSubLevel:!0,languageSelection:!1,languagePrepend:!0},n),l=$(e);if(a.customElements)for(var t=a.customElements.split("||"),i=0;i<t.length;i++)$(l).append(t[i]);if(a.hideSubLevel&&(l.find("li.multichild").length&&(l.find("li.multichild > ul").hide(),$('<span class="open-close-button closed">+</span>').insertAfter(l.find("li.multichild>a"))),l.find("li.parent").length&&(l.find("li.parent > ul").hide(),$('<span class="open-close-button closed">+</span>').insertAfter(l.find("li.parent>a")))),l.find(".selected").removeClass("selected"),$(a.container).append('<ul class="mobile-nav">'+l.html()+"</ul>"),a.languageSelection){var r=$('<div class="mobile-language-selection"></div>');a.languagePrepend?$(a.container).prepend(r):$(a.container).append(r),navigation.languageNavigation(e,{container:a.container+" .mobile-language-selection",urlID:a.urlID})}navigation.current({urlID:a.urlID,currentClass:a.currentClass,selector1:a.container,selector2:a.container}),$(".open-close-button").click(function(){$(this).siblings("ul").slideToggle(),$(this).parent("li").toggleClass("open"),$(this).hasClass("closed")?$(this).removeClass("closed").text("-"):$(this).addClass("closed").text("+")})},breadcrumbs:function(e,n){var a=$.extend({urlID:navigation.getUrlID(),container:".breadcrumbs",prependHome:!1},n),l=$(e);navigation.removeFirstPageEqualToCategory(l);var t=[],i;if(a.prependHome){var r=$(l).find("li.category.item1");i="<li class='"+$(r).attr("class")+"'><a href='"+$(r).children("a").attr("href")+"'>"+$(r).children("a").text()+"</a></li>"}var s=$(l).find("li.item_"+a.urlID);0===s.length&&(s=$(l).find("li.firstpage_"+a.urlID).length?$(l).find("li.firstpage_"+a.urlID):null);var o=0;if(null!==s&&s.length)for(t.push("<li class='current item_"+a.urlID+"'>"+s.children("a").text()+"</li>");0!==s.parent().length;)if(s=s.parent(),o+=1,o%2===0){var u=s.attr("class"),c=s.children().attr("href"),d=s.children("a").text();t.unshift("<li class='"+u+"'><a href='"+c+"'>"+d+"</a></li>")}a.prependHome&&t.unshift(i),t.length>1&&a.prependHome===!1||a.prependHome===!0?(t.unshift("<ul>"),t.push("</ul>")):t=[],$(a.container).append(t.join(""))},languageNavigation:function(e,n){var a=$.extend({urlID:navigation.getUrlID(),container:".LanguageSelection",currentClass:"selected",noWrap:!1,prepend:!1},n),l=a.urlID,t=navigation.extractLanguage(),i=$(a.container),r=$(e).find("li.item1.category");$(e).find("li.item_"+l).not(".category").length?r=$(e).find("li.item_"+l).parents(".category"):$(e).find("li.firstpage_"+l).length&&(r=$(e).find("li.firstpage_"+l)),$.getJSON("/sitemap/languages.json",function(e){for(var n=[],l=0;l<e.length;l++){var s=e[l].IsoCode2,o=e[l].Title,u;u=t===s?"<li class='lang-"+s+" "+a.currentClass+"'><a href='"+r.children("a").attr("href")+"'>"+o+"</a></li>":"<li class='lang-"+s+"'><a href='"+r.children("a").attr("data-rel-"+s)+"'>"+o+"</a></li>",n.push(u)}n.length>1&&(n=a.noWrap?n.join(""):"<ul>"+n.join("")+"</ul>",a.prepend?i.prepend(n):i.append(n))})},legacyHover:function(e){$(e+" > ul > li").hover(function(){$(this).find("ul").css({visibility:"visible",display:"block"})},function(){$(this).find("ul").css({visibility:"hidden",display:"none"})})},emptyMainContentNavigation:function(e,n){var a=$.extend({urlID:navigation.getUrlID(),containerClass:"ContentSubNav",selector:".ObjectsCountNull"},n),l=$(a.selector),t=a.urlID;l.length>0&&$(e).find("ul li.item_"+t+" ul").length>0&&l.children().after("<div class='"+a.containerClass+"'><ul>"+$(e).find("ul li.item_"+t+" ul").html()+"</ul></div>")}};